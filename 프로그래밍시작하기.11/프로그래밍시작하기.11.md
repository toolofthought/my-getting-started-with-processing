# Makey Makey 다루기 #
## Makey Makey 소개 ##
지금까지 프로세싱을 다루면서 우리가 사용할 수 있는 입력 도구는 키보드와 마우스 이 두 가지로 제한되었습니다. 이제 이 한계를 깨고 바나나로 입력을 받아봅시다. 서로 악수하면서 피아노를 연주해보고 물동이를 첨벙거리며 DDR을 실행해 봅시다.
### 키 입력받기 ###
매키매키는 무엇이든 스위치로 만들 수 있는 작은 보드입니다. 컴퓨터에 연결한 후 적당히 회로를 구성하면 거의 모든 것을 스위치로 만들어 입력받을 수 있는 재미있는 도구입니다.

우선 회로를 구성해야 하는데 우선 바나나를 키보드 키 하나로 바꿔봅시다. 바나나를 터치할 때마다 'banana'가 콘솔에 출력되게 간단한 프로그램을 작성합시다.

	//myBananas
	int count = 0;
	void draw() {
	}
	
	void keyPressed() {
		if (key == 'a') {
			count++;
			println(count + " bananas");
		}
	}

'a'키를 누를 때마다 "banana!"라는 문장과 지금까지 몇 번 키를 눌렀는지 콘솔에 출력되는 간단한 프로그램입니다.

혹시 draw() 함수없이 keyPressed()만 사용하면 제대로 작동하지 않으니 주의하세요.

이제 프로그램이 완성되었으니 바나나를 매키매키에 연결합시다.

우선 매키매키를 USB 포트에 연결합니다. 아래 사진에 빨간 불이 들어오는 것을 확인하셨나요?

![](http://i.imgur.com/njkSusH.jpg)

이제 바나나와 매키매키 보드를 연결합니다. 보드 오른쪽에 보시면 각 키보드 키와 대응되는 포트가 있습니다. 위 화살표 포트에 전선을 삽입하고 반대편 끝을 바나나에 연결하세요.

![](http://i.imgur.com/Wax1TPT.jpg)

프로그램을 실행하고 바나나를 만져보세요. 제대로 동작하나요? 동작하면 이상한 것이고 무언가 잘못되었습니다. 사실 한 단계가 남아있거든요.

매키매키에서 회로를 구성할 때는 항상 다른 한 쪽을 earth에 연결해야 합니다. 매키매키 보드 아래 쪽에 EARTH라고 프린트된 부분이 보입니다. 이 부분과 우리 몸을 연결시켜야 합니다. 아래 사진에서 확인해 보세요. 전선을 제 몸에 닿아있는 손목시계에 연결했습니다.

![](http://i.imgur.com/cUWTHIG.jpg)

이제 다른 쪽 손으로 바나나를 만져볼까요? 오호 제대로 동작합니다. 하드웨어 프로그래밍 별 것 아니군요!

![](http://i.imgur.com/9bmNZeu.png)
## 미로 찾기 ##
이제 거의 모든 것을 키보드로 바꿀 수 있습니다. 그냥 넘어갈 수 없습니다. 이번에는 미로찾기를 바나나로 풀어봅시다.

### 프로그램 작성하기 ###
우선 미로를 가져옵시다. [http://www.mazegenerator.net/](http://www.mazegenerator.net/)에 방문해 적당히 미로를 만들어 봅시다.

조그만 원을 이용해 현재 위치를 나타냅니다. 미로를 빠져나오다 벽에 닿이면 실패하는 것으로 합시다. 말은 어렵지만 구현은 생각보다 간단합니다. 현재 위치 픽셀값이 흰 색이면 문제없는 것으로 검은색이면 벽에 닿인 것으로 처리하면 쉽게 문제를 풀 수 있습니다. 이미지에서 지정하는 픽셀의 color를 가져오는 get() 함수를 사용하면 쉽게 구현할 수 있습니다.

	//myMaze
	PImage maze;
	int posX;
	int posY;
	
	void setup() {
		size(324, 324);
		posX = width / 2;
		posY = height / 2;
		maze = loadImage("20 cells diameter theta maze.png");
	}
	
	void draw() {
		image(maze, 0, 0);
		fill(255, 0, 0);
		ellipse(posX, posY, 15, 15);
	
		println("(" + posX + ", " + posY + ")");
	
		if (red(maze.get(posX, posY)) < 255) {
			posX = width / 2;
			posY = height / 2;
		}
	}
	
	void keyPressed() {
		if (key == CODED) {
			if (keyCode == UP) {
				posY--;
			}
			else if (keyCode == DOWN) {
				posY++;
			}
			else if (keyCode == LEFT) {
				posX--;
			}
			else if (keyCode == RIGHT) {
				posX++;
			}
		}
		constrain(posX, 0, width);
		constrain(posY, 0, height);
	}

![](http://i.imgur.com/UMeaeww.png)
	
### 바나나 네 조각으로 회로 구성하기 ###
이제 매키매키로 회로를 만들어 볼까요?

매키매키의 뒷면에는 화살표 키보드에 대응되는 포트가 있습니다.

![](http://i.imgur.com/lQHZ7LD.jpg)

이제 여기에 바나나를 연결합시다. 한 손은 반드시 earth하는 것 잊지 마세요.

![](http://i.imgur.com/sW5K1on.jpg)

### 연필로 회로 구성하기 ###
하지만 꼭 바나나로 회로를 구성할 필요는 없습니다. 연필과 종이만으로도 회로를 구성할 수 있습니다. 연필은 흑연으로 이루어져있고 흑연은 전기가 잘 통하는 물질이기 때문에 종이에 연필로 회로를 그리는 것으로 회로를 만들 수 있습니다.

종이를 꺼내 회로를 그려봅시다. 아래와 같이 한 번 해볼까요?

![](http://i.imgur.com/r7RAGX2.jpg)

약간 두꺼운 종이에 그리세요. 연필선은 진하게 그리는 것이 좋습니다.

## 피아노 ##
매키매키를 가지고 놀면서 피아노를 안 해보고 넘어갈 수 없습니다.

키를 누를 때마다 소리가 나는 프로그램을 작성해 보고 매키매키를 이용해 사물과 연결해 봅시다. 먼저 피아노 프로그램을 작성해 봅시다.

프로세싱에는 minim이라는 유명한 라이브러리가 있습니다. 스케치 > 내부라이브러리 > 라이브러리 추가하기를 실행해서 minim 라이버리를 설치합시다.

![](http://i.imgur.com/yPdeNmT.png)

이제 키를 누를 때마다 mp3 파일이 실행되도록 피아노 프로그램을 작성해봅시다.

	//myPiano
	import ddf.minim.*;
	Minim minim;
	AudioSample c;
	AudioSample d;
	AudioSample e;
	AudioSample f;
	AudioSample g;
	AudioSample a;
	AudioSample b;
	
	void setup() {
		minim = new Minim(this);
		c = minim.loadSample("c48.mp3", 512);
		d = minim.loadSample("d50.mp3", 512);
		e = minim.loadSample("e52.mp3", 512);
		f = minim.loadSample("f53.mp3", 512);
		g = minim.loadSample("g55.mp3", 512);
		a = minim.loadSample("a57.mp3", 512);
		b = minim.loadSample("b59.mp3", 512);
	}
	
	void draw() {
	}
	
	void keyPressed() {
		if (key == 'c' || key == 'C') {
			c.trigger();
		}
		else if (key == 'd' || key == 'D') {
			d.trigger();
		}
		else if (key == 'e' || key == 'E') {
			e.trigger();
		}
		else if (key == 'f' || key == 'F') {
			f.trigger();
		}
		else if (key == 'g' || key == 'G') {
			g.trigger();
		}
		else if (key == 'a' || key == 'A') {
			a.trigger();
		}
		else if (key == 'b' || key == 'B') {
			b.trigger();
		}
	}

c, d, e, f, g, a, b 키를 누르면 대응하는 mp3파일이 실행됩니다. 피아노가 완성되었습니다.

이제 키보드를 만들어봅시다. 바나나보다는 종이에 그리는 것이 더 편하겠지요? 매키매키가 다루는 키가 제한되어 있으니 keyPressed() 함수를 수정에 키보드 맵핑을 바꿉시다.

	//myPianoNewMapping
	import ddf.minim.*;
	Minim minim;
	AudioSample c;
	AudioSample d;
	AudioSample e;
	AudioSample f;
	AudioSample g;
	AudioSample a;
	AudioSample b;
	
	void setup() {
		minim = new Minim(this);
		c = minim.loadSample("c48.mp3", 512);
		d = minim.loadSample("d50.mp3", 512);
		e = minim.loadSample("e52.mp3", 512);
		f = minim.loadSample("f53.mp3", 512);
		g = minim.loadSample("g55.mp3", 512);
		a = minim.loadSample("a57.mp3", 512);
		b = minim.loadSample("b59.mp3", 512);
	}
	
	void draw() {
	}
	
	void keyPressed() {
		if (key == 'w' || key == 'W') {
			c.trigger();
		}
		else if (key == 'a' || key == 'A') {
			d.trigger();
		}
		else if (key == 's' || key == 'S') {
			e.trigger();
		}
		else if (key == 'd' || key == 'D') {
			f.trigger();
		}
		else if (key == 'f' || key == 'F') {
			g.trigger();
		}
		else if (key == 'g' || key == 'G') {
			a.trigger();
		}
		else if (key == CODED && keyCode == LEFT) {
			b.trigger();
		}
	}

![](http://i.imgur.com/Au3eehh.jpg)

earth에 접지하는 것 잊지마세요.

### 인간 피아노 ###
종이에 회로를 그려 피아노를 만들었으면 이제 친구들을 피아노로 바꿀 차례입니다. 한 사람은 earth선과 연결하고 나머지 친구들은 wasdfg 포트에서 나온 선을 잡고 있습니다. earth선에 연결된 사람과 차례로 악수를 합시다. 각각 다른 소리가 나는 것을 확인하셨나요? 인간 피아노 별 것 없습니다.

## 게임하기 ##
### 팩맨 ###
매키매키만 사용할 수 있습니다. 종이에 방향키를 그려서 팩맨을 실행할 수 있습니다.
![](http://i.imgur.com/EFplarZ.jpg)
### DDR ###
모든 것을 키보드로 바꿀 수 있는 매키매키가 있으니 새로운 것을 시도해보고 싶은 마음이 계속 생깁니다.

이번에는 DDR 게임을 해봅시다. 단 키보드 대신 물을 받아서 방향키로 삼읍시다. [http://www.stepmania.com/download/](http://www.stepmania.com/download/)링크에 방문해 DDR게임을 다운받읍시다. 

아래 사진처럼 물을 받아두고 매키매키를 이용해 각 양동이를 키보드 방향키에 연결시킵시다.

![](http://i.imgur.com/VC8lO6y.jpg)

## 누가 누가 오래 버티나 ##
### 스톱와치 ###
프로세싱을 이용해 스톱와치를 만듭시다. 프로그램이 시작되면 추적을 시작하고 키를 누르는 순간 멈추는 프로그램을 만들어봅시다. 프로세싱을 이용하면 매우 정확하게, 정확하게 말하면 천 분의 일 초까지 추적이 가능합니다. mills() 함수는 프로그램이 실행된 이후 몇 밀리 초가 경과했는지 정수형태로 돌려줍니다.

	//myStopWatch
	int begin;
	int current = 0;
	boolean isCounting = false;
	
	void setup() {
		size(480, 360);
		textAlign(CENTER, CENTER);
		textSize(48);
		fill(#F08040);
		begin = millis();
	}
	
	void draw() {
		background(255);
		current = millis() - begin;
		int seconds = current / 1000;
		int subseconds = current % 1000;
		text(seconds + "." + subseconds, width / 2, height /2);
	}

void keyPressed() {
	noLoop();
}

![](http://i.imgur.com/43nFcqL.png)

### 매키매키 연결 ###
이제 재미있는 게임을 해봅시다. 한 쪽 발을 은박지로 감싸고 매키매키에 연결합시다. 바닥에 은박지를 깔아서 바닥에 닿는 순간 키가 눌러지게 회로를 구성합니다.

눈을 감고 한 쪽 다리를 들어올린 다음 프로그램을 시작합니다. 온 몸이 흔들거리지만 균형을 잡으려고 노력합시다.

사실 이 테스트는 노화정도를 알아보는 것으로 알려져 있습니다. 더 오래 서있을수록 신체 나이가 젊은 것입니다. 여러분은 얼마나 서 있을 수 있었나요?

